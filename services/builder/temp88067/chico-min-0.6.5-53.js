/*!
 * Chico UI 0.6.5-53 MIT Licence
 * @autor <chico@mercadolibre.com>
 * @link http://www.chico-ui.com.ar 
 * @team Natan Santolo, Leandro Linares, Guillermo Paz, Natalia Devalle 
 */;(function($){var ch=window.ch={version:"0.6.6",components:"expando,form,menu",internals:"",instances:{},features:{},init:function(){$("html").removeClass("no-js"),ch.features=ch.support(),$(ch.components.split(",")).each(function(a,b){ch.factory({component:b})}),ch.utils.document.bind("keydown",function(a){ch.keyboard(a)})},utils:{body:$("body"),html:$("html"),window:$(window),document:$(document),zIndex:1e3,index:0,isSelector:function(a){if(typeof a!="string")return!1;for(var b in $.expr.match)if($.expr.match[b].test(a)&&$(a).length>0)return!0;return!1},isArray:function(a){return Object.prototype.toString.apply(a)==="[object Array]"},isUrl:function(a){return/^((https?|ftp|file):\/\/|((www|ftp)\.)|(\/|.*\/)*)[a-z0-9-]+((\.|\/)[a-z0-9-]+)+([/?].*)?$/.test(a)},avoidTextSelection:function(){$.each(arguments,function(a,b){$.browser.msie?$(b).attr("unselectable","on"):$.browser.opera?$(b).bind("mousedown",function(){return!1}):$(b).addClass("ch-user-no-select")});return},hasOwn:function(a,b){return Object.prototype.hasOwnProperty.call(a,b)}},events:{CHANGE_LAYOUT:"changeLayout",KEY:{ENTER:"enter",ESC:"esc",LEFT_ARROW:"left_arrow",UP_ARROW:"up_arrow",RIGHT_ARROW:"right_arrow",DOWN_ARROW:"down_arrow"}}};ch.clon=function(a){obj={};for(x in a)obj[x]=a[x];return obj},ch.factory=function(a){if(!a)alert('Factory fatal error: Need and object {component:""} to configure a component.');else{if(!a.component){alert("Factory fatal error: No component defined.");return}var b=a.component,c=function(b){$.fn[b]=function(a){var c=[],d=this,e=arguments;d.each(function(d,f){var g=a||{},h={};h.type=b,h.element=f,h.$element=$(f),h.uid=ch.utils.index+=1;switch(typeof g){case"number":var i=g;g={},g.value=i,e[1]&&(g.msg=e[1]);break;case"string":var j=g;g={},g.msg=j;break;case"function":var k=g;g={},g.lambda=k,e[1]&&(g.msg=e[1])}var l=ch[b].call(h,g);l=ch.utils.hasOwn(l,"public")?l["public"]:l;if(l.type){var m=l.type;ch.instances[m]||(ch.instances[m]=[]),ch.instances[m].push(l)}l.exists&&(l=l.object),c.push(l)});return c.length>1?c:c[0]},a.callback&&a.callback()};ch[a.component]?c(a.component):ch.get({method:"component",component:a.component,script:a.script?a.script:"src/js/"+a.component+".js",styles:a.style?a.style:"src/css/"+b+".css",callback:c})}},ch.get=function(a){switch(a.method){case"content":var b=a.that,c=b.conf,d=ch.utils.hasOwn(b,"controller")?b.controller:b["public"];setTimeout(function(){$.ajax({url:c.ajaxUrl,type:c.ajaxType||"GET",data:c.ajaxParams,cache:!0,async:!0,beforeSend:function(a){a.setRequestHeader("X-Requested-With","XMLHttpRequest")},success:function(a,e,f){b.$content.html(a),ch.utils.hasOwn(c,"onContentLoad")&&c.onContentLoad.call(d,a,e,f),ch.utils.hasOwn(c,"position")&&ch.positioner(c.position)},error:function(a,e,f){data=ch.utils.hasOwn(c,"onContentError")?c.onContentError.call(d,a,e,f):"<p>Error on ajax call </p>",b.$content.html(data),ch.utils.hasOwn(c,"position")&&ch.positioner(c.position)}})},0);break;case"component":if(a.style){var e=document.createElement("link");e.href=a.style,e.rel="stylesheet",e.type="text/css"}if(a.script){var f=document.createElement("script");f.src=a.script}var g=document.getElementsByTagName("head")[0]||document.documentElement,h=!1;f.onload=f.onreadystatechange=function(){!h&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")&&(h=!0,a.callback&&a.callback(a.component),f.onload=f.onreadystatechange=null,g&&f.parentNode&&g.removeChild(f))},a.script&&g.insertBefore(f,g.firstChild),a.style&&g.appendChild(e)}},ch.support=function(){var a=document.body||document.documentElement,b=function(){var b=a.style;return b.WebkitTransition!==undefined||b.MozTransition!==undefined||b.OTransition!==undefined||b.transition!==undefined}(),c=function(){var b=!1,c=document.createElement("div");c.style.position="fixed",c.style.top="10px",a.appendChild(c),c.offsetTop===10&&(b=!0),a.removeChild(c);return b}();return{transition:b,fixed:c}},ch.controllers=function(){var a=this;a=ch.object.call(a),a.parent=ch.clon(a),a.children=[];return a},ch.navs=function(){var a=this,b=a.conf;b.icon=ch.utils.hasOwn(b,"icon")?b.icon:!0,b.open=b.open||!1,b.fx=b.fx||!1,a=ch.object.call(a),a.parent=ch.clon(a);var c=function(){$("<span>").addClass("ico").html("drop").appendTo(a.$trigger);return};a.active=!1,a.show=function(c){a.prevent(c);if(a.active)return a.hide(c);a.active=!0,a.$trigger.addClass("ch-"+a.type+"-trigger-on"),b.fx?a.$content.slideDown("fast",function(){a.callbacks("onShow")}):(a.$content.removeClass("ch-hide"),a.callbacks("onShow"));return a},a.hide=function(c){a.prevent(c);if(!!a.active){a.active=!1,a.$trigger.removeClass("ch-"+a.type+"-trigger-on"),b.fx?a.$content.slideUp("fast",function(){a.callbacks("onHide")}):(a.$content.addClass("ch-hide"),a.callbacks("onHide"));return a}},a.configBehavior=function(){a.$trigger.addClass("ch-"+a.type+"-trigger").bind("click",function(b){a.show(b)}),a.$content.addClass("ch-"+a.type+"-content ch-hide"),b.icon&&c(),b.open&&a.show();return},a.$element.addClass("ch-"+a.type);return a},ch.object=function(){var a=this,b=a.conf;a.prevent=function(b){b&&typeof b=="object"&&(b.preventDefault(),b.stopPropagation());return a},a.content=function(c){if(c===undefined){var c=b.content||b.msg;return c?ch.utils.isSelector(c)?$(c):c:b.ajax===!0?a.$trigger.attr("href")||a.$trigger.parents("form").attr("action"):b.ajax}var d=b.cache;b.cache=!1,ch.utils.isUrl(c)?(b.content=undefined,b.ajax=c):(b.ajax=!1,b.content=c),ch.utils.hasOwn(a,"$content")&&(a.$content.html(a.loadContent()),a.position("refresh")),b.cache=d;return a["public"]},a.loadContent=function(){if(b.ajax===!0){b.ajaxUrl=a.$element.attr("href")||a.$element.parents("form").attr("action"),b.ajaxParams="x=x";if(a.$element.attr("type")=="submit"){b.ajaxType=a.$element.parents("form").attr("method")||"GET";var c=a.$element.parents("form").serialize();b.ajaxParams=b.ajaxParams+(c!=""?"&"+c:"")}ch.get({method:"content",that:a});return'<div class="loading"></div>'}if(b.ajax||b.msg&&ch.utils.isUrl(b.msg)){b.ajaxUrl=b.ajax||b.msg,b.ajaxParams="x=x",ch.get({method:"content",that:a});return'<div class="loading"></div>'}var d=b.content||b.msg;return ch.utils.isSelector(d)?$(d).detach().clone().removeClass("ch-hide").show():d},a.callbacks=function(c){if(ch.utils.hasOwn(b,c)){var d=a.controller?a.controller["public"]:a["public"];return b[c].call(d)}},a.position=function(c){switch(typeof c){case"object":b.position.context=c.context||b.position.context,b.position.points=c.points||b.position.points,b.position.offset=c.offset||b.position.offset,b.position.fixed=c.fixed||b.position.fixed,ch.positioner(b.position);return a["public"];case"string":c!="refresh"&&alert('ChicoUI error: position() expected to find "refresh" parameter.'),ch.positioner(b.position);return a["public"];case"undefined":return b.position}},a["public"]={};return a},ch.watcher=function(a){var b=this;a=ch.clon(a),b.conf=a,b=ch.object.call(b),b.parent=ch.clon(b);var c=function(){if(!(ch.utils.hasOwn(ch.instances,"form")&&ch.instances.form.length>0)){b.$element.parents("form").form();var d=ch.instances.form.length-1;return ch.instances.form[d]}var a=0,c=ch.instances.form.length;for(a;a<c;a++)if(ch.instances.form[a].element===b.$element.parents("form")[0])return ch.instances.form[a]}(),d=function(){var a=ch.instances.watcher;if(a&&a.length>0)for(var c=0,d=a.length;c<d;c++){if(a[c].element!==b.element)continue;$.merge(a[c].conditions,b.conditions);return{exists:!0,object:a[c]}}},e=function(){b.validate(),c.checkStatus()};b.active=!1,b.enabled=!0,b.reference=function(){var a;if(b.$element.hasClass("options"))if(b.$element.find("h4").length>0){var c=b.$element.find("h4");c.wrapInner("<span>"),a=c.children()}else b.$element.prev().prop("tagName")=="LEGEND"&&(a=b.$element.prev());else a=b.$element;return a}(),b.conditions=function(){var b=[],c=0,d=a.conditions.length;for(c;c<d;c++){var e=a.conditions[c];a[e.name]&&(e.value=a[e.name],a.messages[e.name]&&(e.message=a.messages[e.name]),b.push(e))}return b}(),b.isRequired=function(){var a=b.conditions.length;while(a--){var c=b.conditions[a];if(c.name==="required"&&c.value)return!0}return!1};var f={};f.uid=b.uid+"#0",f.type="helper",f.element=b.element,f.$element=b.$element,b.helper=ch.helper.call(f,b),b.validate=function(a){if(!b.$element.attr("disabled")){var d=b.isRequired();if(!d&&b.isEmpty()&&b.active===!1)return;if(b.enabled&&(b.active===!1||!b.isEmpty()||d)){b.callbacks("beforeValidate");var e=b.conditions.length,f=b.$element.val(),g=!1;while(e--){var h=b.conditions[e];b.isRequired()&&(g=b.isEmpty()),h.patt&&(g=!h.patt.test(f)),h.expr&&(g=!h.expr(f,h.value)),h.func&&(g=!h.func.call(b["public"],f));if(g){b.callbacks("onError"),b.$element.addClass("error");var i=h.message?h.message:ch.utils.hasOwn(c,"messages")?c.messages[h.name]:undefined;b.helper.show(i),b.active=!0;var a=b.tag=="OPTIONS"||b.tag=="SELECT"?"change":"blur";b.$element.one(a,function(a){b.validate(a)});return}}}if(b.active||!b.enabled){b.$element.removeClass("error"),b.helper.hide(),b.active=!1;if(a){var j=a.originalEvent.explicitOriginalTarget||document.activeElement;j.type=="submit"&&c.submit()}c.checkStatus()}b.callbacks("afterValidate");return b}},b.reset=function(){b.active=!1,b.$element.removeClass("error"),b.helper.hide(),b.$element.unbind("blur change",b.validate),b.callbacks("onReset");return b},b.isEmpty=function(){b.tag=b.$element.hasClass("options")?"OPTIONS":b.element.tagName;switch(b.tag){case"OPTIONS":return b.$element.find("input:checked").length===0;case"SELECT":var a=b.$element.val();return parseInt(a)===-1||a===null;case"INPUT":case"TEXTAREA":return $.trim(b.$element.val()).length===0}},b["public"].uid=b.uid,b["public"].element=b.element,b["public"].type="watcher",b["public"].reference=b.reference,b["public"].conditions=b.conditions,b["public"].helper=b.helper["public"],b["public"].active=function(){return b.active},b["public"].and=function(){return b.$element},b["public"].reset=function(){b.reset();return b["public"]},b["public"].validate=function(){b.validate();return b["public"]},b["public"].enable=function(){b.enabled=!0;return b["public"]},b["public"].disable=function(){b.enabled=!1,b.reset();return b["public"]},b["public"].refresh=function(){b.helper.position("refresh");return b["public"]};var g=d();if(g){var b={};b["public"]=g}else c.children.push(b["public"]);return b},ch.positioner=function(a){var b=function(){e=k(),f=p(),d=o(),n()},a=a||this.conf.position;a.points=a.points||"cm cm",a.offset=a.offset||"0 0";var c=$(a.element);c.css("position","absolute");var d,e,f,g={"lt lb":"bottom","lb lt":"top","rt rb":"bottom","rb rt":"top","lt rt":"right","cm cm":"center"},h=a.offset.split(" "),i=parseInt(h[0]),j=parseInt(h[1]),k=function(){var a,b,c,d,e,f,g,h=30;if(typeof window.innerWidth!="undefined"){a=window,b=a.innerWidth-h,c=a.innerHeight,f=a.pageXOffset,g=a.pageYOffset;return{element:a,left:0+i+f-h,top:0+j+g,bottom:c+g,right:b+f,width:b,height:c}}a=document.documentElement,b=a.clientWidth-h,c=a.clientHeight,f=a.scrollLeft,g=a.scrollTop;return{element:a,left:0+i+f,top:0+j+g,bottom:c+g,right:b+f,width:b,height:c}},l=function(a){var b=d.left,e=d.top,f=d.width,g=d.height,h=c.outerWidth(),i=c.outerHeight(),j={ll:b,lr:b+f,rr:b+f-h,cc:b+f/2-h/2},k={tt:e,tb:e+g,bt:e-i,mm:e+g/2-i/2},l={left:j[a.my_x+a.at_x],top:k[a.my_y+a.at_y]};return l},m=function(b,d){var h=l(d);h.direction=g[b];if(a.hold)return h;b=="lt lb"&&h.top+f.top+c.outerHeight()>e.bottom&&(d.my_y="b",d.at_y="t",stylesBottom=h,h=l(d),h.direction="top",h.top-=2*j,h.top+f.top<e.top&&(d.my_y="t",d.at_y="b",h=stylesBottom,h.direction="bottom"));if(h.left+f.left+c.outerWidth()>e.right){d.my_x="r",d.at_x="r",stylesLeft=h;var k=h.direction;h=l(d),h.direction=k+"-right",h.left-=2*i,k=="top"&&(h.top-=2*j),h.left<e.left&&(d.my_y="l",d.at_y="l",h=stylesLeft)}return h},n=function(){var b=a.points.split(" "),e={my_x:b[0].slice(0,1),my_y:b[0].slice(1,2),at_x:b[1].slice(0,1),at_y:b[1].slice(1,2)},f=m(a.points,e);c.css({left:f.left,top:f.top}).removeClass("ch-top ch-left ch-bottom ch-right ch-bottom-right ch-top-right  ch-right-right").addClass("ch-"+f.direction),ch.utils.hasOwn(d,"element")&&d.element!==ch.utils.window[0]&&$(d.element).removeClass("ch-top ch-left ch-bottom ch-right ch-bottom-right ch-top-right ch-right-right").addClass("ch-"+f.direction)},o=function(){if(!a.context)return e;var b=a.context.offset();d={element:a.context,top:b.top+j-f.top,left:b.left+i-f.left,width:a.context.outerWidth(),height:a.context.outerHeight()};return d},p=function(){var a={};a.left=0,a.top=0;var b=c.offsetParent();if(b.css("position")=="relative"){var d=(b.outerWidth()-b.width()-parseInt(b.css("padding-left"))*2)/2;a=b.offset(),a.left-=i-d,a.top-=j}return{left:a.left,top:a.top}},q=!1;ch.utils.window.bind("resize scroll",function(){q=!0}),setInterval(function(){if(!!q){q=!1;if(c.css("display")==="none")return;b()}},250),b();return $(c)},ch.expando=function(a){var b=this;a=ch.clon(a),b.conf=a,b=ch.navs.call(b),b.parent=ch.clon(b),b.$trigger=b.$element.children().eq(0).wrapInner("<span>").children(),b.$content=b.$element.children().eq(1),b["public"].uid=b.uid,b["public"].element=b.element,b["public"].type=b.type,b["public"].show=function(){b.show();return b["public"]},b["public"].hide=function(){b.hide();return b["public"]},b.configBehavior(),ch.utils.avoidTextSelection(b.$trigger);return b},ch.form=function(a){if(this.$element.find(":submit").length==0||this.$element.attr("action")=="")alert("Form fatal error: The <input type=submit> is missing, or need to define a action attribute on the form tag.");else{if(ch.utils.hasOwn(ch.instances,"form")&&ch.instances.form.length>0)for(var b=0,c=ch.instances.form.length;b<c;b++)if(ch.instances.form[b].element===this.element)return{exists:!0,object:ch.instances.form[b]};var d=this;a=ch.clon(a),ch.utils.hasOwn(a,"messages")||(a.messages={}),a.messages.general=a.messages.general||"Check for errors.",d.$element.attr("novalidate","novalidate"),d.conf=a,d=ch.controllers.call(d),d.parent=ch.clon(d);var e=!0,f=$('<p class="ch-validator"><span class="ico error">Error: </span>'+a.messages.general+"</p>"),g=function(){d.$element.before(f),$("body").trigger(ch.events.CHANGE_LAYOUT)},h=function(){f.detach(),$("body").trigger(ch.events.CHANGE_LAYOUT)},i=function(){for(var a=0,b=d.children.length;a<b;a++)if(d.children[a].active()){e||h(),g(),e=!1,d.children[a].element.focus();return}e||(h(),e=!0)},j=function(){d.callbacks("beforeValidate");for(var a=0,b=d.children.length;a<b;a++)d.children[a].validate();i(),e?d.callbacks("onValidate"):d.callbacks("onError"),d.callbacks("afterValidate");return d},k=function(b){d.prevent(b),d.callbacks("beforeSubmit"),j(),e&&(ch.utils.hasOwn(a,"onSubmit")?d.callbacks("onSubmit"):d.element.submit()),d.callbacks("afterSubmit");return d},l=function(a){d.prevent(a),h();for(var b=0,c=d.children.length;b<c;b++)d.children[b].reset();d.callbacks("onClear");return d},m=function(a){l(),d.element.reset(),d.callbacks("onReset");return d};d["public"].uid=d.uid,d["public"].element=d.element,d["public"].type=d.type,d["public"].children=d.children,d["public"].messages=a.messages,d["public"].validate=function(){j();return d["public"]},d["public"].submit=function(){k();return d["public"]},d["public"].checkStatus=function(){i();return d["public"]},d["public"].getStatus=function(){return e},d["public"].clear=function(){l();return d["public"]},d["public"].reset=function(){m();return d["public"]},ch.utils.hasOwn(a,"onSubmit")&&(d.$element.bind("submit",function(a){d.prevent(a)}),d.$element.find(":submit").unbind("click")),d.$element.bind("submit",function(a){k(a)}),d.$element.find(":reset, .resetForm").bind("click",function(a){m(a)});return d}},ch.menu=function(a){var b=this;a=ch.clon(a),b.conf=a,b=ch.controllers.call(b),b.parent=ch.clon(b);var c=a.selected-1,d=function(){var a=ch.utils.html.hasClass("ie6")||ch.utils.html.hasClass("ie7")?!1:!0;b.$element.children().each(function(d,e){var f=$(e).children();if(f.eq(0).prop("tagName")=="A")$(e).addClass("ch-bellows").children().addClass("ch-bellows-trigger"),b.children.push(f[0]);else{var g=$(e).expando({fx:a,onShow:function(){c=d}});b.children.push(g)}})},e=function(c){var d,e;if(typeof c=="string"){var f=c.split("#");d=f[0]-1,e=f[1]}else d=c-1;var g=b.children[d];ch.utils.hasOwn(g,"uid")?(g.show(),e&&$(g.element).find("a").eq(e-1).addClass("ch-menu-on"),a.accordion&&$.each(b.children,function(a,c){c.tagName!="A"&&ch.utils.hasOwn(c,"uid")&&b.children[d].uid!=b.children[a].uid&&c.hide()})):b.children[d].addClass("ch-menu-on"),b.callbacks("onSelect");return b},f=function(){$.each(b.children,function(a,b){$(b.element).find(".ch-expando-trigger").unbind("click").bind("click",function(){e(a+1)})});return};b["public"].uid=b.uid,b["public"].element=b.element,b["public"].type=b.type,b["public"].select=function(a){e(a);return b["public"]},b.$element.addClass("ch-menu"),d(),a.accordion&&f(),ch.utils.hasOwn(a,"selected")&&e(a.selected);return b},ch.accordion=function(a){a=a||{},a.accordion=!0;return ch.menu.call(this,a)},ch.factory({component:"accordion"})})($);